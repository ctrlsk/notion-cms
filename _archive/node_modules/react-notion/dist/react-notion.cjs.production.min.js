"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,t=require("react"),a=(e=t)&&"object"==typeof e&&"default"in e?e.default:e,n=require("prismjs");require("prismjs/components/prism-jsx");var r=["video","image","embed","figma"],l=function(e){var a=e.block,n=e.mapImageUrl,l=a.value,o=a.value.type;if(!r.includes(o))return null;var i=l.format,c=null!=i?i:{},s=c.display_source,m=c.block_aspect_ratio,u=void 0===m?void 0:m,p=c.block_height,v=c.block_width,d=u||(void 0===p?1:p)/(void 0===v?1:v);if("embed"===o||"video"===o||"figma"===o)return t.createElement("div",{style:{paddingBottom:100*d+"%",position:"relative"}},t.createElement("iframe",{className:"notion-image-inset",src:"figma"===o?l.properties.source[0][0]:void 0===s?void 0:s}));if("image"===a.value.type){var g,f=n(l.properties.source[0][0],a),E=null===(g=l.properties.caption)||void 0===g?void 0:g[0][0];return u?t.createElement("div",{style:{paddingBottom:100*d+"%",position:"relative"}},t.createElement("img",{className:"notion-image-inset",alt:E||"notion image",src:f})):t.createElement("img",{alt:E,src:f})}return null},o=function(e){var a=e.code,r=e.language,l=void 0===r?"javascript":r,o=l.toLowerCase(),i=n.languages[o]||n.languages.javascript,c="language-"+l.toLowerCase();return t.createElement("pre",{className:"notion-code "+c},t.createElement("code",{className:c,dangerouslySetInnerHTML:{__html:n.highlight(a,i,l)}}))},i=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((function(e){return!!e})).join(" ")},c=function(e){return e.reduce((function(e,t){return e+t[0]}),"")},s=function(e,t){var a=function(e){var t=[],a=void 0,n=-1;return Object.keys(e).forEach((function(r){var l;null===(l=e[r].value.content)||void 0===l||l.forEach((function(r){var l,o,i=null===(l=e[r])||void 0===l||null===(o=l.value)||void 0===o?void 0:o.type;i&&i!==a&&(n++,a=i,t[n]=[]),t[n].push(r)})),a=void 0})),t}(t).find((function(t){return t.includes(e)}));if(a)return a.indexOf(e)+1},m=function(e,t){void 0===e&&(e="");var a=new URL("https://www.notion.so"+(e.startsWith("/image")?e:"/image/"+encodeURIComponent(e)));return t&&(a.searchParams.set("table","space"===t.value.parent_table?"block":t.value.parent_table),a.searchParams.set("id",t.value.id),a.searchParams.set("cache","v2")),a.toString()},u=function(e){return void 0===e&&(e=""),"/"+e.replace(/-/g,"")},p=function(e){var a,n,r,l=e.block,o=e.className,s=e.big,m=e.mapImageUrl;if("page"!==(r=l.value).type&&"callout"!==r.type)return null;var u=null===(a=l.value.format)||void 0===a?void 0:a.page_icon,p=null===(n=l.value.properties)||void 0===n?void 0:n.title;if(null==u?void 0:u.includes("http")){var v=m(u);return t.createElement("img",{className:i(o,s?"notion-page-icon-cover":"notion-page-icon"),src:v,alt:p?c(p):"Icon"})}return t.createElement("span",{className:i(o,s?"notion-page-icon-cover":"notion-page-icon"),role:"img","aria-label":u},u)},v=function(e){var a=e.blockMap,n=e.mapPageUrl,r=e.mapImageUrl,l=Object.keys(a)[0];if(!l)return null;for(var o=[],i=l;;){var c,s,m=a[i];if(!m||!m.value)break;var u=null===(c=m.value.properties)||void 0===c?void 0:c.title[0][0],v=null===(s=m.value.format)||void 0===s?void 0:s.page_icon;if(!u&&!v)break;o.push({block:m,active:i===l,pageId:i,title:u,icon:v});var d=m.value.parent_id;if(!d)break;i=d}return o.reverse(),t.createElement("header",{className:"notion-page-header"},t.createElement("div",{className:"notion-nav-header"},t.createElement("div",{className:"notion-nav-breadcrumbs"},o.map((function(e,a){return t.createElement(t.Fragment,{key:e.pageId},t.createElement("a",{className:"notion-nav-breadcrumb "+(e.active?"notion-nav-breadcrumb-active":""),href:e.active?void 0:n(e.pageId)},e.icon&&t.createElement(p,{className:"notion-nav-icon",block:e.block,mapImageUrl:r}),e.title&&t.createElement("span",{className:"notion-nav-title"},e.title)),a<o.length-1&&t.createElement("span",{className:"notion-nav-spacer"},"/"))})))))},d=function(e){return null==e?void 0:e.map((function(e,a){var n=e[0],r=e[1];return r?r.reduceRight((function(e,n){switch(n[0]){case"h":return t.createElement("span",{key:a,className:"notion-"+n[1]},e);case"c":return t.createElement("code",{key:a,className:"notion-inline-code"},e);case"b":return t.createElement("b",{key:a},e);case"i":return t.createElement("em",{key:a},e);case"s":return t.createElement("s",{key:a},e);case"a":return t.createElement("a",{className:"notion-link",href:n[1],key:a},e);default:return t.createElement(t.Fragment,{key:a},e)}}),t.createElement(t.Fragment,null,n)):t.createElement(t.Fragment,{key:a},n)}))},g=function(e){var a,n,r,m,u,g,f,E,b,k,N,h=e.block,y=e.children,_=e.level,U=e.fullPage,I=e.hideHeader,w=e.blockMap,x=e.mapPageUrl,j=e.mapImageUrl,P=null==h?void 0:h.value;switch(null==P?void 0:P.type){case"page":if(0===_){if(U){if(!P.properties)return null;var O=P.format||{},M=O.page_icon,F=O.page_cover,q=O.page_full_width,L=O.page_small_text,C=100*(1-(O.page_cover_position||.5));return t.createElement("div",{className:"notion notion-app"},t.createElement("div",{className:"notion-cursor-listener"},t.createElement("div",{className:"notion-frame"},!I&&t.createElement(v,{blockMap:w,mapPageUrl:x,mapImageUrl:j}),t.createElement("div",{className:"notion-scroller"},F&&t.createElement("img",{src:j(F),alt:c(P.properties.title),className:"notion-page-cover",style:{objectPosition:"center "+C+"%"}}),t.createElement("main",{className:i("notion-page",!F&&"notion-page-offset",q&&"notion-full-width",L&&"notion-small-text")},M&&t.createElement(p,{className:F?"notion-page-icon-offset":void 0,block:h,big:!0,mapImageUrl:j}),t.createElement("div",{className:"notion-title"},d(P.properties.title)),y)))))}return t.createElement("main",{className:"notion"},y)}return P.properties?t.createElement("a",{className:"notion-page-link",href:x(P.id)},P.format&&t.createElement("div",{className:"notion-page-icon"},t.createElement(p,{block:h,mapImageUrl:j})),t.createElement("div",{className:"notion-page-text"},d(P.properties.title))):null;case"header":return P.properties?t.createElement("h1",{className:"notion-h1"},d(P.properties.title)):null;case"sub_header":return P.properties?t.createElement("h2",{className:"notion-h2"},d(P.properties.title)):null;case"sub_sub_header":return P.properties?t.createElement("h3",{className:"notion-h3"},d(P.properties.title)):null;case"divider":return t.createElement("hr",{className:"notion-hr"});case"text":if(!P.properties)return t.createElement("div",{className:"notion-blank"},"Â ");var R=null===(a=P.format)||void 0===a?void 0:a.block_color;return t.createElement("p",{className:i("notion-text",R&&"notion-"+R)},d(P.properties.title));case"bulleted_list":case"numbered_list":var T,W=function(e,a){return"bulleted_list"===P.type?t.createElement("ul",{className:"notion-list notion-list-disc"},e):t.createElement("ol",{start:a,className:"notion-list notion-list-numbered"},e)};T=P.content?t.createElement(t.Fragment,null,P.properties&&t.createElement("li",null,d(P.properties.title)),W(y)):P.properties?t.createElement("li",null,d(P.properties.title)):null;var B=h.value.type!==w[h.value.parent_id].value.type,H=s(P.id,w);return B?W(T,H):T;case"image":case"embed":case"figma":case"video":var S=h.value;return t.createElement("figure",{className:"notion-asset-wrapper",style:void 0!==S.format?{width:S.format.block_width}:void 0},t.createElement(l,{block:h,mapImageUrl:j}),S.properties.caption&&t.createElement("figcaption",{className:"notion-image-caption"},d(S.properties.caption)));case"code":if(P.properties.title)return t.createElement(o,{key:P.id,language:P.properties.language[0][0]||"",code:P.properties.title[0][0]});break;case"column_list":return t.createElement("div",{className:"notion-row"},y);case"column":var A=P.format.column_ratio,z=Number((1/A).toFixed(0));return t.createElement(t.Fragment,null,t.createElement("div",{className:"notion-column",style:{width:"calc((100% - "+46*(z-1)+"px) * "+A+")"}},y),t.createElement("div",{className:"notion-spacer",style:{width:46}}));case"quote":return P.properties?t.createElement("blockquote",{className:"notion-quote"},d(P.properties.title)):null;case"collection_view":if(!h)return null;var D=null==h||null===(n=h.collection)||void 0===n?void 0:n.types[0];return t.createElement("div",null,t.createElement("h3",{className:"notion-h3"},d(null===(r=h.collection)||void 0===r?void 0:r.title)),"table"===(null==D?void 0:D.type)&&t.createElement("div",{style:{maxWidth:"100%",marginTop:5}},t.createElement("table",{className:"notion-table"},t.createElement("thead",null,t.createElement("tr",{className:"notion-tr"},null===(m=D.format)||void 0===m||null===(u=m.table_properties)||void 0===u?void 0:u.filter((function(e){return e.visible})).map((function(e,a){var n,r;return t.createElement("th",{className:"notion-th",key:a,style:{minWidth:e.width}},null===(n=h.collection)||void 0===n||null===(r=n.schema[e.property])||void 0===r?void 0:r.name)})))),t.createElement("tbody",null,null==h||null===(g=h.collection)||void 0===g?void 0:g.data.map((function(e,a){var n,r;return t.createElement("tr",{className:"notion-tr",key:a},null===(n=D.format)||void 0===n||null===(r=n.table_properties)||void 0===r?void 0:r.filter((function(e){return e.visible})).map((function(a,n){var r,l;return t.createElement("td",{key:n,className:"notion-td "+("title"===a.property?"notion-bold":"")},d(e[null===(r=h.collection)||void 0===r||null===(l=r.schema[a.property])||void 0===l?void 0:l.name]))})))}))))),"gallery"===(null==D?void 0:D.type)&&t.createElement("div",{className:"notion-gallery"},null===(f=h.collection)||void 0===f?void 0:f.data.map((function(e,a){var n,r;return t.createElement("div",{key:"col-"+a,className:"notion-gallery-card"},t.createElement("div",{className:"notion-gallery-content"},null===(n=D.format)||void 0===n||null===(r=n.gallery_properties)||void 0===r?void 0:r.filter((function(e){return e.visible})).map((function(a,n){var r;return t.createElement("p",{key:n+"item",className:"notion-gallery-data "+(0===n?"is-first":"")},c(e[null===(r=h.collection)||void 0===r?void 0:r.schema[a.property].name]))}))))}))));case"callout":return t.createElement("div",{className:i("notion-callout",P.format.block_color&&"notion-"+P.format.block_color+"_co")},t.createElement("div",null,t.createElement(p,{block:h,mapImageUrl:j})),t.createElement("div",{className:"notion-callout-text"},d(P.properties.title)));case"bookmark":var G=P.properties.link,J=null!==(E=P.properties.title)&&void 0!==E?E:G,K=P.properties.description,Q=null===(b=P.format)||void 0===b?void 0:b.block_color,V=null===(k=P.format)||void 0===k?void 0:k.bookmark_icon,X=null===(N=P.format)||void 0===N?void 0:N.bookmark_cover;return t.createElement("div",{className:"notion-row"},t.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:i("notion-bookmark",Q&&"notion-"+Q),href:G[0][0]},t.createElement("div",null,t.createElement("div",{className:"notion-bookmark-title"},d(J)),K&&t.createElement("div",{className:"notion-bookmark-description"},d(K)),t.createElement("div",{className:"notion-bookmark-link"},V&&t.createElement("img",{src:V,alt:c(J)}),t.createElement("div",null,d(G)))),X&&t.createElement("div",{className:"notion-bookmark-image"},t.createElement("img",{src:X,alt:c(J)}))));case"toggle":return t.createElement("details",{className:"notion-toggle"},t.createElement("summary",null,d(P.properties.title)),t.createElement("div",null,y));default:return t.createElement("div",null)}return null};exports.NotionRenderer=function e(t){var n,r,l=t.level,o=void 0===l?0:l,i=t.currentId,c=t.mapPageUrl,s=void 0===c?u:c,p=t.mapImageUrl,v=void 0===p?m:p,d=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)t.indexOf(a=l[n])>=0||(r[a]=e[a]);return r}(t,["level","currentId","mapPageUrl","mapImageUrl"]),f=d.blockMap,E=i||Object.keys(f)[0],b=f[E];return b?a.createElement(g,Object.assign({key:E,level:o,block:b,mapPageUrl:s,mapImageUrl:v},d),null==b||null===(n=b.value)||void 0===n||null===(r=n.content)||void 0===r?void 0:r.map((function(t){return a.createElement(e,Object.assign({key:t,currentId:t,level:o+1,mapPageUrl:s,mapImageUrl:v},d))}))):null},exports.classNames=i,exports.defaultMapImageUrl=m,exports.defaultMapPageUrl=u,exports.getListNumber=s,exports.getTextContent=c;
//# sourceMappingURL=react-notion.cjs.production.min.js.map
